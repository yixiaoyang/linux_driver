#
# xiaoyang.yi 2012-3-20
# linux driver for LRF020(uz2440d core)
#

CC=arm-linux-gcc
PWD:=$(shell pwd)
KERNELDIR=/opt/linux/EmbedSky/linux-2.6.30.4
INSTALLDIR=./
INC=$(KERNELDIR)/include $(PWD)/*.h
MOD_NAME=lrf020

obj-m 	+=	lrf020.o
obj-m	+=	rf.o
obj-m	+=	uz2400d.0

modules:
	$(MAKE) -C $(KERNELDIR) M=$(PWD) modules -I $(INC)
	@echo "compiled ok!"
run:
	sudo insmod *.ko 
install:
	@echo "install ok!"
unstall:
	sudo rmmod $(MOD_NAME) 
	@echo "unregister module ok!"
debug:
	cat /var/log/messages | tail
result:
	cat /proc/devices
help:
	@echo "install with 'mknod /dev/devname c dev_num 0' cmd"
clean:
	rm -rf *.o *.ko *.mod.c *.markers *.order *.symvers
